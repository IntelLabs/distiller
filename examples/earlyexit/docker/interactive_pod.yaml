apiVersion: v1
kind: Pod
metadata:
  generateName: earlyexit-interactive-
  namespace: earlyexit
  labels:
    type: interactive
spec:
  hostIPC: true
  restartPolicy: Never
  nodeSelector:
    aeon_i1k: "true"
  priorityClassName: high
  tolerations:
  - key: "group"
    operator: "Equal"
    value: "spring"
  containers:
  - name: gpu-container
    command: ["sleep", "infinity"]
    image: nervana-dockrepo01.fm.intel.com:5001/earlyexit
    securityContext:
      runAsUser: 10013113 # (try running `id`)
    resources:
      limits:
        nvidia.com/gpu: 1 # requesting 2 GPUs
      requests:
        nvidia.com/gpu: 1 # requesting 2 GPUs
    volumeMounts:
    - mountPath: "/mnt"
      name: home
    - mountPath: "/dataset"
      name: dataset
    env:
    - name: http_proxy
      value: http://proxy-chain.intel.com:911
    - name: https_proxy
      value: http://proxy-chain.intel.com:912
    - name: HTTP_PROXY
      value: http://proxy-chain.intel.com:911
    - name: HTTPS_PROXY
      value: http://proxy-chain.intel.com:912
    - name: no_proxy
      value: localhost,127.0.0.1,intel.com,.intel.com,cluster,.cluster,10.0.0.0/8,172.168.0.0/16,192.168.0.0/16,10.54.8.248,10.54.4.19,10.54.8.18,132.233.52.91,localhost,127.0.0.1,intel.com,.intel.com,cluster,.cluster,10.54.8.137,10.54.8.241,10.54.8.246,10.54.8.247,10.54.8.248,10.54.4.19,10.105.186.109,172.17.0.1,10.105.186.110,172.17.0.1,10.105.186.111,10.105.186.112,172.17.0.1,10.105.186.113,172.17.0.1,10.105.186.114,10.105.186.115,192.168.1.246,10.105.186.116,172.17.0.1,10.105.186.117,172.17.0.1,10.105.186.118,172.17.0.1,10.105.186.119,10.105.186.120,10.105.186.121,10.105.186.122
    - name: NO_PROXY
      value: localhost,127.0.0.1,intel.com,.intel.com,cluster,.cluster,10.0.0.0/8,172.168.0.0/16,192.168.0.0/16,10.54.8.248,10.54.4.19,10.54.8.18,132.233.52.91,localhost,127.0.0.1,intel.com,.intel.com,cluster,.cluster,10.54.8.137,10.54.8.241,10.54.8.246,10.54.8.247,10.54.8.248,10.54.4.19,10.105.186.109,172.17.0.1,10.105.186.110,172.17.0.1,10.105.186.111,10.105.186.112,172.17.0.1,10.105.186.113,172.17.0.1,10.105.186.114,10.105.186.115,192.168.1.246,10.105.186.116,172.17.0.1,10.105.186.117,172.17.0.1,10.105.186.118,172.17.0.1,10.105.186.119,10.105.186.120,10.105.186.121,10.105.186.122
  volumes:
  - nfs:
      server: fmcfs05n02b-03.fm.intel.com
      path: "/nrv_algo_home01/barad" # Set to your home directory
    name: home
  - hostPath:
      path: /dataset
    name: dataset
